<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800">
  <!-- Define styles -->
  <defs>
    <style>
      .module-box { fill: #ffffff; stroke: #2c3e50; stroke-width: 2; }
      .module-measurement { fill: #3498db; }
      .module-pipeline { fill: #e74c3c; }
      .module-training { fill: #2ecc71; }
      .module-monitoring { fill: #f39c12; }
      .title-text { fill: white; font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; }
      .desc-text { fill: #2c3e50; font-family: Arial, sans-serif; font-size: 13px; }
      .arrow { stroke: #7f8c8d; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .arrow-feedback { stroke: #95a5a6; stroke-width: 2; stroke-dasharray: 5,5; fill: none; marker-end: url(#arrowhead-feedback); }
      .data-box { fill: #ecf0f1; stroke: #95a5a6; stroke-width: 2; }
      .label-text { font-family: Arial, sans-serif; font-size: 12px; fill: #555; }
      .header-text { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #2c3e50; }
    </style>
    
    <!-- Arrow markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#7f8c8d" />
    </marker>
    <marker id="arrowhead-feedback" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#95a5a6" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="header-text">Fairness Pipeline Architecture</text>
  
  <!-- Data Source -->
  <rect x="50" y="80" width="180" height="80" class="data-box" rx="5"/>
  <text x="140" y="110" text-anchor="middle" class="desc-text" font-weight="bold">Raw Data</text>
  <text x="140" y="130" text-anchor="middle" class="label-text">• Features (X)</text>
  <text x="140" y="145" text-anchor="middle" class="label-text">• Labels (y)</text>

  <!-- Module 1: MEASUREMENT -->
  <g id="measurement-module">
    <rect x="280" y="60" width="200" height="140" class="module-box" rx="8"/>
    <rect x="280" y="60" width="200" height="35" class="module-measurement" rx="8"/>
    <text x="380" y="83" text-anchor="middle" class="title-text">1. MEASUREMENT</text>
    
    <text x="290" y="115" class="desc-text">• Demographic Parity</text>
    <text x="290" y="135" class="desc-text">• Equalized Odds</text>
    <text x="290" y="155" class="desc-text">• Equal Opportunity</text>
    <text x="290" y="175" class="desc-text">• Bootstrap CI</text>
    <text x="290" y="190" class="desc-text">• Effect Sizes</text>
  </g>

  <!-- Module 2: BIAS DETECTION & MITIGATION -->
  <g id="pipeline-module">
    <rect x="530" y="60" width="220" height="140" class="module-box" rx="8"/>
    <rect x="530" y="60" width="220" height="35" class="module-pipeline" rx="8"/>
    <text x="640" y="83" text-anchor="middle" class="title-text">2. MITIGATION</text>
    
    <text x="540" y="115" class="desc-text">Detection:</text>
    <text x="550" y="132" class="label-text">• Representation bias</text>
    <text x="550" y="147" class="label-text">• Proxy features</text>
    <text x="540" y="167" class="desc-text">Mitigation:</text>
    <text x="550" y="184" class="label-text">• Reweighting</text>
    <text x="550" y="195" class="label-text">• Resampling</text>
  </g>

  <!-- Module 3: TRAINING -->
  <g id="training-module">
    <rect x="280" y="250" width="200" height="140" class="module-box" rx="8"/>
    <rect x="280" y="250" width="200" height="35" class="module-training" rx="8"/>
    <text x="380" y="273" text-anchor="middle" class="title-text">3. TRAINING</text>
    
    <text x="290" y="305" class="desc-text">• Fair Constraints</text>
    <text x="290" y="325" class="desc-text">• Reductions Wrapper</text>
    <text x="290" y="345" class="desc-text">• Custom Losses</text>
    <text x="290" y="365" class="desc-text">• Calibration</text>
    <text x="290" y="380" class="desc-text">• Grid Search</text>
  </g>

  <!-- Trained Model Box -->
  <rect x="530" y="270" width="220" height="100" class="data-box" rx="5"/>
  <text x="640" y="300" text-anchor="middle" class="desc-text" font-weight="bold">Trained Model</text>
  <text x="640" y="325" text-anchor="middle" class="label-text">• Fair Classifier</text>
  <text x="640" y="345" text-anchor="middle" class="label-text">• Calibrated Predictions</text>
  <text x="640" y="360" text-anchor="middle" class="label-text">• Metadata</text>

  <!-- Module 4: MONITORING -->
  <g id="monitoring-module">
    <rect x="800" y="60" width="220" height="140" class="module-box" rx="8"/>
    <rect x="800" y="60" width="220" height="35" class="module-monitoring" rx="8"/>
    <text x="910" y="83" text-anchor="middle" class="title-text">4. MONITORING</text>
    
    <text x="810" y="115" class="desc-text">• Real-time Tracking</text>
    <text x="810" y="135" class="desc-text">• Drift Detection</text>
    <text x="810" y="155" class="desc-text">• Alert System</text>
    <text x="810" y="175" class="desc-text">• Dashboards</text>
    <text x="810" y="190" class="desc-text">• Reports</text>
  </g>

  <!-- Production Stream -->
  <rect x="800" y="270" width="220" height="100" class="data-box" rx="5"/>
  <text x="910" y="300" text-anchor="middle" class="desc-text" font-weight="bold">Production Stream</text>
  <text x="910" y="325" text-anchor="middle" class="label-text">• Predictions</text>
  <text x="910" y="345" text-anchor="middle" class="label-text">• Ground Truth</text>
  <text x="910" y="360" text-anchor="middle" class="label-text">• Sensitive Features</text>

  <!-- Shared Components -->
  <g id="shared-components">
    <rect x="50" y="450" width="970" height="120" class="module-box" rx="8" fill="#f8f9fa"/>
    <text x="535" y="480" text-anchor="middle" class="desc-text" font-weight="bold" font-size="16px">Shared Components</text>
    
    <text x="80" y="510" class="desc-text">• Logging & Validation</text>
    <text x="280" y="510" class="desc-text">• Data Schemas</text>
    <text x="450" y="510" class="desc-text">• Configuration Manager</text>
    <text x="660" y="510" class="desc-text">• Statistical Utils</text>
    <text x="850" y="510" class="desc-text">• MLflow Integration</text>
    
    <rect x="70" y="530" width="900" height="25" fill="#e8f4f8" stroke="#3498db" stroke-width="1" rx="3"/>
    <text x="520" y="547" text-anchor="middle" class="label-text">sklearn-compatible • Config-driven • Production-ready</text>
  </g>

  <!-- MLflow Tracking -->
  <rect x="50" y="620" width="280" height="120" class="data-box" rx="5"/>
  <text x="190" y="650" text-anchor="middle" class="desc-text" font-weight="bold">MLflow Tracking</text>
  <text x="80" y="675" class="label-text">• Experiment versioning</text>
  <text x="80" y="693" class="label-text">• Metric logging</text>
  <text x="80" y="711" class="label-text">• Artifact storage</text>
  <text x="80" y="729" class="label-text">• Model registry</text>

  <!-- Reports & Outputs -->
  <rect x="370" y="620" width="280" height="120" class="data-box" rx="5"/>
  <text x="510" y="650" text-anchor="middle" class="desc-text" font-weight="bold">Reports & Outputs</text>
  <text x="400" y="675" class="label-text">• JSON results</text>
  <text x="400" y="693" class="label-text">• Markdown reports</text>
  <text x="400" y="711" class="label-text">• Interactive dashboards</text>
  <text x="400" y="729" class="label-text">• Alert notifications</text>

  <!-- Alerts & Actions -->
  <rect x="690" y="620" width="280" height="120" class="data-box" rx="5"/>
  <text x="830" y="650" text-anchor="middle" class="desc-text" font-weight="bold">Alerts & Actions</text>
  <text x="720" y="675" class="label-text">• Threshold violations</text>
  <text x="720" y="693" class="label-text">• Drift alerts</text>
  <text x="720" y="711" class="label-text">• Model retraining triggers</text>
  <text x="720" y="729" class="label-text">• Stakeholder notifications</text>

  <!-- Arrows: Data flow -->
  <path d="M 230 120 L 280 120" class="arrow"/>
  <path d="M 480 130 L 530 130" class="arrow"/>
  <path d="M 640 200 L 640 250" class="arrow"/>
  <path d="M 480 320 L 530 320" class="arrow"/>
  <path d="M 750 320 L 800 320" class="arrow"/>
  <path d="M 910 200 L 910 270" class="arrow"/>

  <!-- Arrows: Baseline measurement feedback -->
  <path d="M 380 200 L 380 230 L 640 230 L 640 270" class="arrow-feedback"/>
  
  <!-- Arrows: Monitoring feedback to measurement -->
  <path d="M 910 60 L 910 40 L 380 40 L 380 60" class="arrow-feedback"/>

  <!-- Arrows: To shared components -->
  <path d="M 380 390 L 380 450" class="arrow" stroke-dasharray="3,3"/>
  <path d="M 640 370 L 640 450" class="arrow" stroke-dasharray="3,3"/>
  <path d="M 910 370 L 910 450" class="arrow" stroke-dasharray="3,3"/>

  <!-- Arrows: To outputs -->
  <path d="M 190 570 L 190 620" class="arrow"/>
  <path d="M 510 570 L 510 620" class="arrow"/>
  <path d="M 830 570 L 830 620" class="arrow"/>

  <!-- Flow labels -->
  <text x="255" y="110" class="label-text">Baseline</text>
  <text x="505" y="120" class="label-text">Detect</text>
  <text x="625" y="235" class="label-text">Mitigate</text>
  <text x="505" y="310" class="label-text">Train</text>
  <text x="775" y="310" class="label-text">Deploy</text>
  <text x="895" y="250" class="label-text">Predict</text>
  <text x="730" y="30" class="label-text" fill="#95a5a6">Continuous</text>
  <text x="730" y="45" class="label-text" fill="#95a5a6">feedback</text>

  <!-- Legend -->
  <g id="legend" transform="translate(1040, 450)">
    <text x="0" y="0" class="desc-text" font-weight="bold">Flow Types:</text>
    <line x1="0" y1="15" x2="50" y2="15" class="arrow"/>
    <text x="55" y="20" class="label-text">Data flow</text>
    <line x1="0" y1="35" x2="50" y2="35" class="arrow-feedback"/>
    <text x="55" y="40" class="label-text">Feedback</text>
    <line x1="0" y1="55" x2="50" y2="55" stroke="#7f8c8d" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="55" y="60" class="label-text">Shared</text>
  </g>

  <!-- Key Features Box -->
  <rect x="1040" y="80" width="140" height="160" fill="#f8f9fa" stroke="#95a5a6" stroke-width="1" rx="5"/>
  <text x="1110" y="105" text-anchor="middle" class="desc-text" font-weight="bold">Key Features</text>
  <text x="1050" y="125" class="label-text">✓ Modular design</text>
  <text x="1050" y="142" class="label-text">✓ Statistical rigor</text>
  <text x="1050" y="159" class="label-text">✓ Bootstrap CI</text>
  <text x="1050" y="176" class="label-text">✓ Real-time alerts</text>
  <text x="1050" y="193" class="label-text">✓ Config-driven</text>
  <text x="1050" y="210" class="label-text">✓ MLflow tracking</text>
  <text x="1050" y="227" class="label-text">✓ Production ready</text>
</svg>